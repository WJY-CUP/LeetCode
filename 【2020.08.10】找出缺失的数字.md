# 面试题 17.04. 消失的数字

题目链接：https://leetcode-cn.com/problems/missing-number-lcci/



## 1.题目描述

数组`nums`包含从`0`到`n`的所有整数，但其中缺了一个。请编写代码找出那个缺失的整数。你有办法在O(n)时间内完成吗？



**示例：**

~~~
输入：[3,0,1]
输出：2
~~~



## 2.题解

**思路：利用异或的特性，res = res ^ x ^ x。对同一个值异或两次，那么结果等于它本身，所以我们对res从0-nums.length进行异或，同时对nums数组中的值进行异或，出现重复的会消失，所以最后res的值是只出现一次的数字，也就是nums数组中缺失的那个数字。**

~~~java
    public int missingNumber(int[] nums) {
        int res = 0;
        for (int i = 0; i < nums.length; ++i) {
            res ^= i;
            res ^= nums[i];
        }
        res ^= nums.length;
        
        return res;
    }
~~~



**精选评论**

~~~
异或的几个性质：

1. 0和任何值的异或等于本身，即：A ^ 0 = A
2. 异或本身等于0，即 A ^ A = 0
3. 异或满足结合律，即 A ^ B ^ C = A ^ ( B ^ C)
~~~

~~~
不好理解的话 建议从宏观角度看问题

数组索引是0-n 缺少的元素是0到n+1

假设有给定的数组是[0,2,3] 缺少1 如果不缺数字 则为[0,1,2,3]

用上面的解法 异或所有元素 重复的会归零

数组【0,2,3】

索引依次为0 1 2 依次是0^0 ^ 1^2 ^ 2^3

最终要加一个nums.length的原因就是缺少了最大元素 不是我们想要的结果

而应该是0^0 ^ 1^2 ^ 2^3 ^3 这样求出来的值就是缺少的值了
~~~

~~~
假设数组长度是n，缺少一个数，那么加上缺少的那个数总共n+1个数。 这n+1个数是0、1、2...n 遍历数组的时候和0、1、n-1都异或了，所以最后需要和n也就是数组长度length进行异或。通过异或的性质可以得出，最后的res值就是缺少的数据。
~~~

